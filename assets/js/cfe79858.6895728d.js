"use strict";(globalThis.webpackChunkleetcode_the_hard_way=globalThis.webpackChunkleetcode_the_hard_way||[]).push([[33440],{957(e,a,n){n.r(a),n.d(a,{assets:()=>o,contentTitle:()=>s,default:()=>h,frontMatter:()=>p,metadata:()=>i,toc:()=>m});var t=n(9346),r=(n(37953),n(58860));const p={description:"Author: @wkw | https://leetcode.com/problems/maximal-score-after-applying-k-operations/",tags:["Array","Greedy","Heap (Priority Queue)"]},s="2530 - Maximal Score After Applying K Operations (Medium)",i={unversionedId:"2500-2599/maximal-score-after-applying-k-operations-medium",id:"2500-2599/maximal-score-after-applying-k-operations-medium",title:"2530 - Maximal Score After Applying K Operations (Medium)",description:"Author: @wkw | https://leetcode.com/problems/maximal-score-after-applying-k-operations/",source:"@site/solutions/2500-2599/2530-maximal-score-after-applying-k-operations-medium.md",sourceDirName:"2500-2599",slug:"/2500-2599/maximal-score-after-applying-k-operations-medium",permalink:"/solutions/2500-2599/maximal-score-after-applying-k-operations-medium",draft:!1,editUrl:"https://github.com/wingkwong/leetcode-the-hard-way/tree/main/solutions/2500-2599/2530-maximal-score-after-applying-k-operations-medium.md",tags:[{label:"Array",permalink:"/solutions/tags/array"},{label:"Greedy",permalink:"/solutions/tags/greedy"},{label:"Heap (Priority Queue)",permalink:"/solutions/tags/heap-priority-queue"}],version:"current",sidebarPosition:2530,frontMatter:{description:"Author: @wkw | https://leetcode.com/problems/maximal-score-after-applying-k-operations/",tags:["Array","Greedy","Heap (Priority Queue)"]},sidebar:"tutorialSidebar",previous:{title:"2529 - Maximum Count of Positive Integer and Negative Integer (Easy)",permalink:"/solutions/2500-2599/maximum-count-of-positive-integer-and-negative-integer-easy"},next:{title:"2531 - Make Number of Distinct Characters Equal (Medium)",permalink:"/solutions/2500-2599/make-number-of-distinct-characters-equal-medium"}},o={},m=[{value:"Problem Link",id:"problem-link",level:2},{value:"Problem Statement",id:"problem-statement",level:2},{value:"Approach 1: Priority Queue",id:"approach-1-priority-queue",level:2}],l=e=>function(a){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.yg)("div",a)},y=l("Tabs"),c=l("TabItem"),g=l("SolutionAuthor"),u={toc:m};function h({components:e,...a}){return(0,r.yg)("wrapper",(0,t.A)({},u,a,{components:e,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"2530---maximal-score-after-applying-k-operations-medium"},"2530 - Maximal Score After Applying K Operations (Medium)"),(0,r.yg)("h2",{id:"problem-link"},"Problem Link"),(0,r.yg)("p",null,(0,r.yg)("a",{parentName:"p",href:"https://leetcode.com/problems/maximal-score-after-applying-k-operations/"},"https://leetcode.com/problems/maximal-score-after-applying-k-operations/")),(0,r.yg)("h2",{id:"problem-statement"},"Problem Statement"),(0,r.yg)("p",null,"You are given a ",(0,r.yg)("strong",{parentName:"p"},"0-indexed")," integer array ",(0,r.yg)("inlineCode",{parentName:"p"},"nums")," and an integer ",(0,r.yg)("inlineCode",{parentName:"p"},"k"),". You have a ",(0,r.yg)("strong",{parentName:"p"},"starting score")," of ",(0,r.yg)("inlineCode",{parentName:"p"},"0"),"."),(0,r.yg)("p",null,"In one ",(0,r.yg)("strong",{parentName:"p"},"operation"),":"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"choose an index ",(0,r.yg)("inlineCode",{parentName:"li"},"i")," such that ",(0,r.yg)("inlineCode",{parentName:"li"},"0 <= i < nums.length"),","),(0,r.yg)("li",{parentName:"ol"},"increase your ",(0,r.yg)("strong",{parentName:"li"},"score")," by ",(0,r.yg)("inlineCode",{parentName:"li"},"nums[i]"),", and"),(0,r.yg)("li",{parentName:"ol"},"replace ",(0,r.yg)("inlineCode",{parentName:"li"},"nums[i]")," with ",(0,r.yg)("inlineCode",{parentName:"li"},"ceil(nums[i] / 3)"),".")),(0,r.yg)("p",null,"Return ","*","the maximum possible ",(0,r.yg)("strong",{parentName:"p"},"score")," you can attain after applying ",(0,r.yg)("strong",{parentName:"p"},"exactly","*")," ",(0,r.yg)("inlineCode",{parentName:"p"},"k")," ",(0,r.yg)("em",{parentName:"p"},"operations"),"."),(0,r.yg)("p",null,"The ceiling function ",(0,r.yg)("inlineCode",{parentName:"p"},"ceil(val)")," is the least integer greater than or equal to ",(0,r.yg)("inlineCode",{parentName:"p"},"val"),"."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Example 1:")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"Input: nums = [10,10,10,10,10], k = 5\nOutput: 50\nExplanation: Apply the operation to each array element exactly once. The final score is 10 + 10 + 10 + 10 + 10 = 50.\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Example 2:")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"Input: nums = [1,10,3,3,3], k = 3\nOutput: 17\nExplanation: You can do the following operations:\nOperation 1: Select i = 1, so nums becomes [1,4,3,3,3]. Your score increases by 10.\nOperation 2: Select i = 1, so nums becomes [1,2,3,3,3]. Your score increases by 4.\nOperation 3: Select i = 2, so nums becomes [1,1,1,3,3]. Your score increases by 3.\nThe final score is 10 + 4 + 3 = 17.\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Constraints:")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"1 <= nums.length, k <= 10^5")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"1 <= nums[i] <= 10^9"))),(0,r.yg)("h2",{id:"approach-1-priority-queue"},"Approach 1: Priority Queue"),(0,r.yg)("p",null,"When you see a question asking you to find something maximum / minimum after ",(0,r.yg)("inlineCode",{parentName:"p"},"K")," operations. It's a hint that this could be solved by priority queue."),(0,r.yg)("p",null,"In this question, it is easy to see that we should apply the operation on the largest number each time (i.e. greedy approach). If we just write a brute force solution, after each operation, we need to iterate ",(0,r.yg)("inlineCode",{parentName:"p"},"nums")," again to find out the largest number which costs ",(0,r.yg)("span",{parentName:"p",className:"math math-inline"},(0,r.yg)("span",{parentName:"span",className:"katex"},(0,r.yg)("span",{parentName:"span",className:"katex-mathml"},(0,r.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.yg)("semantics",{parentName:"math"},(0,r.yg)("mrow",{parentName:"semantics"},(0,r.yg)("mi",{parentName:"mrow"},"O"),(0,r.yg)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,r.yg)("mi",{parentName:"mrow"},"n"),(0,r.yg)("mo",{parentName:"mrow",stretchy:"false"},")")),(0,r.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"O(n)")))),(0,r.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.yg)("span",{parentName:"span",className:"base"},(0,r.yg)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,r.yg)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.02778em"}},"O"),(0,r.yg)("span",{parentName:"span",className:"mopen"},"("),(0,r.yg)("span",{parentName:"span",className:"mord mathnormal"},"n"),(0,r.yg)("span",{parentName:"span",className:"mclose"},")")))))," where ",(0,r.yg)("span",{parentName:"p",className:"math math-inline"},(0,r.yg)("span",{parentName:"span",className:"katex"},(0,r.yg)("span",{parentName:"span",className:"katex-mathml"},(0,r.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.yg)("semantics",{parentName:"math"},(0,r.yg)("mrow",{parentName:"semantics"},(0,r.yg)("mi",{parentName:"mrow"},"n")),(0,r.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"n")))),(0,r.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.yg)("span",{parentName:"span",className:"base"},(0,r.yg)("span",{parentName:"span",className:"strut",style:{height:"0.4306em"}}),(0,r.yg)("span",{parentName:"span",className:"mord mathnormal"},"n")))))," is the number of elements in ",(0,r.yg)("inlineCode",{parentName:"p"},"nums")," and this happens ",(0,r.yg)("span",{parentName:"p",className:"math math-inline"},(0,r.yg)("span",{parentName:"span",className:"katex"},(0,r.yg)("span",{parentName:"span",className:"katex-mathml"},(0,r.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.yg)("semantics",{parentName:"math"},(0,r.yg)("mrow",{parentName:"semantics"},(0,r.yg)("mi",{parentName:"mrow"},"K")),(0,r.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"K")))),(0,r.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.yg)("span",{parentName:"span",className:"base"},(0,r.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6833em"}}),(0,r.yg)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.07153em"}},"K")))))," times, which is not efficient."),(0,r.yg)("p",null,"To optimise the solution, we can apply priority queue / heap (in python) so that we could find the largest number efficiently, which takes ",(0,r.yg)("span",{parentName:"p",className:"math math-inline"},(0,r.yg)("span",{parentName:"span",className:"katex"},(0,r.yg)("span",{parentName:"span",className:"katex-mathml"},(0,r.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.yg)("semantics",{parentName:"math"},(0,r.yg)("mrow",{parentName:"semantics"},(0,r.yg)("mi",{parentName:"mrow"},"O"),(0,r.yg)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,r.yg)("mn",{parentName:"mrow"},"1"),(0,r.yg)("mo",{parentName:"mrow",stretchy:"false"},")")),(0,r.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"O(1)")))),(0,r.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.yg)("span",{parentName:"span",className:"base"},(0,r.yg)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,r.yg)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.02778em"}},"O"),(0,r.yg)("span",{parentName:"span",className:"mopen"},"("),(0,r.yg)("span",{parentName:"span",className:"mord"},"1"),(0,r.yg)("span",{parentName:"span",className:"mclose"},")")))))," for finding the max number."),(0,r.yg)(y,{mdxType:"Tabs"},(0,r.yg)(c,{value:"cpp",label:"C++",mdxType:"TabItem"},(0,r.yg)(g,{name:"@wkw",mdxType:"SolutionAuthor"}),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-cpp"},"class Solution {\npublic:\n    long long maxKelements(vector<int>& nums, int k) {\n        long long ans = 0;\n        // we want to take the max one in each round\n        priority_queue<int> pq(nums.begin(), nums.end());\n        // perform k rounds\n        while (k--) {\n            // get the max one\n            int t = pq.top();\n            // pop it out\n            pq.pop();\n            // add to answer\n            ans += t;\n            // add the ceil value\n            // ceil(x / y) = (x + y - 1) / y\n            // ceil(t / 3) = (t + 3 - 1) / 3 = (t + 2) / 3\n            pq.push((t + 2) / 3);\n        }\n        return ans;\n    }\n};\n"))),(0,r.yg)(c,{value:"py",label:"Python",mdxType:"TabItem"},(0,r.yg)(g,{name:"@wkw",mdxType:"SolutionAuthor"}),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-py"},"class Solution:\n    def maxKelements(self, nums: List[int], k: int) -> int:\n        res = 0\n        # we want to take the max one in each round\n        # create a max heap by pushing negative values\n        mx_heap = [-num for num in nums]\n        heapq.heapify(mx_heap)\n        # perform k rounds\n        while k > 0:\n            k -= 1\n            # get the max one (negative because of max-heap simulation)\n            t = -heapq.heappop(mx_heap)\n            # add to answer\n            res += t\n            # push the ceil value of t / 3 back into the heap\n            # ceil(x / y) = (x + y - 1) / y\n            # ceil(t / 3) = (t + 3 - 1) / 3 = (t + 2) / 3\n            heapq.heappush(mx_heap, -((t + 2) // 3))\n        return res\n")))))}h.isMDXComponent=!0},58860(e,a,n){n.d(a,{xA:()=>l,yg:()=>g});var t=n(37953);function r(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function p(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,t)}return n}function s(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?p(Object(n),!0).forEach(function(a){r(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function i(e,a){if(null==e)return{};var n,t,r=function(e,a){if(null==e)return{};var n,t,r={},p=Object.keys(e);for(t=0;t<p.length;t++)n=p[t],a.indexOf(n)>=0||(r[n]=e[n]);return r}(e,a);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(t=0;t<p.length;t++)n=p[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=t.createContext({}),m=function(e){var a=t.useContext(o),n=a;return e&&(n="function"==typeof e?e(a):s(s({},a),e)),n},l=function(e){var a=m(e.components);return t.createElement(o.Provider,{value:a},e.children)},y={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},c=t.forwardRef(function(e,a){var n=e.components,r=e.mdxType,p=e.originalType,o=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),c=m(n),g=r,u=c["".concat(o,".").concat(g)]||c[g]||y[g]||p;return n?t.createElement(u,s(s({ref:a},l),{},{components:n})):t.createElement(u,s({ref:a},l))});function g(e,a){var n=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var p=n.length,s=new Array(p);s[0]=c;var i={};for(var o in a)hasOwnProperty.call(a,o)&&(i[o]=a[o]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var m=2;m<p;m++)s[m]=n[m];return t.createElement.apply(null,s)}return t.createElement.apply(null,n)}c.displayName="MDXCreateElement"}}]);